<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Snake - ARENA</title>
<style>
body{font-family:Arial;margin:0;padding:0;background:linear-gradient(120deg,#f6d365,#fda085);}
.container{max-width:500px;margin:50px auto;background:rgba(255,255,255,0.95);padding:20px;border-radius:15px;box-shadow:0 10px 25px rgba(0,0,0,0.2);text-align:center;}
canvas{background:#fefefe;display:block;margin:0 auto;border-radius:15px;}
#score{margin-top:10px;font-weight:bold;}
button{margin-top:10px;padding:10px 20px;border-radius:10px;border:none;background:linear-gradient(45deg,#85FFBD,#FFFB7D);cursor:pointer;transition:0.3s;}
button:hover{transform:scale(1.05);box-shadow:0 5px 15px rgba(0,0,0,0.3);}
</style>
</head>
<body>
<div class="container">
<h2>Snake Game</h2>
<p>Use Arrow Keys to move the snake</p>
<canvas id="gameCanvas" width="400" height="400" tabindex="0"></canvas>
<div id="score">Score: 0</div>
<button onclick="startGame()">Restart</button>
<br>
<a href="games.html"><button>Back to Games</button></a>
</div>

<script>
const canvas=document.getElementById("gameCanvas");
const ctx=canvas.getContext("2d");
const box=20;
let snake=[],food,xdir,ydir,score,gameInterval;

function startGame(){
  clearInterval(gameInterval);
  snake=[{x:5,y:5}];
  food=generateFood();
  xdir=0; ydir=0;
  score=0;
  document.getElementById("score").innerText="Score: 0";
  canvas.focus();
  gameInterval=setInterval(update,150);
}

function generateFood(){
  return {x:Math.floor(Math.random()*20),y:Math.floor(Math.random()*20)};
}

document.addEventListener("keydown",dir);

function dir(e){
  if(e.key==="ArrowUp" && ydir!==1){xdir=0;ydir=-1;}
  if(e.key==="ArrowDown" && ydir!==-1){xdir=0;ydir=1;}
  if(e.key==="ArrowLeft" && xdir!==1){xdir=-1;ydir=0;}
  if(e.key==="ArrowRight" && xdir!==-1){xdir=1;ydir=0;}
}

function update(){
  let head={x:snake[0].x+xdir,y:snake[0].y+ydir};
  if(head.x<0||head.x>19||head.y<0||head.y>19||snake.some(s=>s.x===head.x && s.y===head.y)){
    clearInterval(gameInterval);
    document.getElementById("score").innerText="Game Over! Score: "+score;
    saveScore("Snake",score);
    return;
  }
  snake.unshift(head);
  if(head.x===food.x && head.y===food.y){score++;food=generateFood();}
  else{snake.pop();}
  draw();
}

function draw(){
  ctx.fillStyle="#fefefe";ctx.fillRect(0,0,canvas.width,canvas.height);
  ctx.fillStyle="#85FFBD";snake.forEach(s=>ctx.fillRect(s.x*box,s.y*box,box,box));
  ctx.fillStyle="#FF6B6B";ctx.fillRect(food.x*box,food.y*box,box,box);
  document.getElementById("score").innerText="Score: "+score;
}

function saveScore(game,score){
  const user=JSON.parse(localStorage.getItem("user"))||{scores:{}};
  if(!user.scores[game]) user.scores[game]=[];
  user.scores[game].push(score);
  localStorage.setItem("user",JSON.stringify(user));
}

window.startGame=startGame;
</script>
</body>
</html>
